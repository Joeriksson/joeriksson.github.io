
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="" />

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://joeriksson.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://joeriksson.github.io/theme/pygments/native.min.css">
  <link rel="stylesheet" type="text/css" href="https://joeriksson.github.io/theme/font-awesome/css/font-awesome.min.css">



    <link href="https://joeriksson.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="J-O Eriksson RSS">




<meta name="author" content="J-O" />
<meta name="description" content="How to create a decorator function in Python that will accept argument(s)" />
<meta name="keywords" content="Python, Bits and pieces of Py">

<meta property="og:site_name" content="J-O Eriksson"/>
<meta property="og:title" content="Decorator with parameters"/>
<meta property="og:description" content="How to create a decorator function in Python that will accept argument(s)"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://joeriksson.github.io/Decorator with parameters.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-07-09 21:49:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://joeriksson.github.io/author/j-o.html">
<meta property="article:section" content="Python"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Bits and pieces of Py"/>
<meta property="og:image" content="/images/logo.jpg">

  <title>J-O Eriksson &ndash; Decorator with parameters</title>

</head>
<body>
  <aside>
    <div>
      <a href="https://joeriksson.github.io">
        <img src="/images/logo.jpg" alt="J-O Eriksson" title="J-O Eriksson">
      </a>
      <h1><a href="https://joeriksson.github.io">J-O Eriksson</a></h1>

<p>Python Developer Wannabe</p>
      <nav>
        <ul class="list">
          <li><a href="https://joeriksson.github.io/pages/about.html#about">About</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-twitter" href="https://twitter.com/wildvasa" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-github" href="https://github.com/joeriksson" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="https://joeriksson.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


      <a href="https://joeriksson.github.io/feeds/all.rss.xml">    RSS
</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="Decorator with parameters">Decorator with parameters</h1>
    <p>
          Posted on Tue 09 July 2019 21:49 in <a href="https://joeriksson.github.io/category/python.html">Python</a>


    </p>
  </header>


  <div>
    <p>I this post I'll try to make an easy example, and explain, how to create a decorator function that accepts and uses argument(s). A decorator that would accept an argument could look like this:</p>
<div class="highlight"><pre><span></span><span class="nd">@mydecorator</span><span class="p">(</span><span class="n">my_argument</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_decorated_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">input</span>
</pre></div>


<p>A simple scenario could be that you would like to print something before and after the output of your function.</p>
<div class="highlight"><pre><span></span><span class="nd">@mydecorator</span><span class="p">(</span><span class="s1">&#39;-------------------&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_decorated_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">input</span>

<span class="k">print</span><span class="p">(</span><span class="n">my_decorated_function</span><span class="p">(</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">)</span>
</pre></div>


<p>In this case we would want the outcome to be:</p>
<p>-------------------</p>
<p>Hello, World!</p>
<p>-------------------</p>
<h3>A decorator without argument(s)</h3>
<p>Let's first look at doing a decorator without input arguments as a reference. It's usually done by creating a decorator function, with a function as an input parameter. So the function you decorate will be the input to the decorator function. </p>
<p>Then a wrapper function is created within the decorator function that does some some work. The decorator function then returns the wrapper function with some modified functionality as in the following example. Here I've put the incoming function into the result variable, and returning an f-string with the that variable included.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;Adding some text in the decorator</span><span class="se">\n</span><span class="s1">{result}&#39;</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>


<p>So, when decorating a function with the <code>my_decorator</code> function, we'll see that the output of the decorated function is changed.</p>
<div class="highlight"><pre><span></span><span class="nd">@my_decorator</span>
<span class="k">def</span> <span class="nf">my_decorated_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">input</span>

<span class="k">print</span><span class="p">(</span><span class="n">my_decorated_function</span><span class="p">(</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span>Adding some text in the decorator
Hello, World!
</pre></div>


<h3>A decorator with an argument</h3>
<p>But what if we didn't want to hard code, in this case, what text is added to the output, but rather control that by adding a parameter to the decorator? Well, for me that was very hard to understand how to do at first, and it took me some googling and brainwork to get the hang of it all.</p>
<p>We already have a function within a function to do what we already did in the previous example. Now we also need a function, within a function, within a function. Coming from languages as <code>C#</code> and <code>PowerShell</code>, I'd never seen this before. Maybe it exists in those languages as well, but it is all new to me. But after some time I think I got it. So the decorator function would look like this.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">input_arg</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">the_real_decorator</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;{input_arg}</span><span class="se">\n</span><span class="s1">{result}</span><span class="se">\n</span><span class="s1">{input_arg}&#39;</span>
        <span class="k">return</span> <span class="n">wrapper</span>

    <span class="k">return</span> <span class="n">the_real_decorator</span>
</pre></div>


<p>And now we can add a parameter to the decorator, which will be used within the decorator function. So the outer decorator function will take the parameter from the decorator, and the next inner function will take the decorated function as input (as seen in the first example) and be able to use the input from the outer function. </p>
<p>First we return the <code>wrapper</code> function to <code>the_real_decorator</code>, and then we return <code>the_real_decorator</code> to the actual decorator function. </p>
<p>For me this was/is kind of mind blowing. But when we now use the decorator with a parameter, we can see that the parameter works.</p>
<div class="highlight"><pre><span></span><span class="nd">@my_decorator</span><span class="p">(</span><span class="s1">&#39;-------------&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">my_decorated_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">input</span>

<span class="k">print</span><span class="p">(</span><span class="n">my_decorated_function</span><span class="p">(</span><span class="s1">&#39;Hello, World!&#39;</span><span class="p">))</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="c1">-------------</span>
<span class="n">Hello</span><span class="p">,</span> <span class="n">World</span><span class="o">!</span>
<span class="c1">-------------</span>
</pre></div>


<h3>Conclusion</h3>
<p>I hope that in this article, I've managed to explain in a simple way, how you can use parameter(s) with your decorator functions in Python. </p>
<h3>Resources</h3>
<p>One of the good articles I read trying to learn this concept you'll find at: <a href="https://realpython.com/primer-on-python-decorators/">Primer on Python Decorators - Real Python</a>. Also I watched this talk on YouTube from PyCon 2019 in my quest to learn this concept: <a href="https://youtu.be/MjHpMCIvwsY">Reuven M. Lerner - Practical decorators - PyCon 2019</a>.</p>
<p>Let me know on Twitter if I can improve this article, or if you have other resource to help out in understanding this.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://joeriksson.github.io/tag/python.html">Python</a>
      <a href="https://joeriksson.github.io/tag/bits-and-pieces-of-py.html">Bits and pieces of Py</a>
    </p>
  </div>





</article>

    <footer>
<p>&copy;  </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " J-O Eriksson ",
  "url" : "https://joeriksson.github.io",
  "image": "/images/logo.jpg",
  "description": "J-O's Thoughts and Writings"
}
</script>

</body>
</html>